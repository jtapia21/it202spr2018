
<!doctype html>
<html lang="en">
    
        <head>
        <!-- Required meta tags -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    
        <!-- Bootstrap CSS -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
        
        <title>Project 2</title>
                
        <style>
          
          .screen {
            display:none;
            min-height:300px;
            color:white; 
            padding:15px;
            
          }
          
          #map {
            height: 500px;
            }
          
          body {
            background-color: powderblue;
          }
          
          #hScreen {
            background-color: orange;
            text-align: center;
          }
          
          #sScreen {
            background-color: dodgerblue;
            text-align: center;
          }
        .picture {
            display: none;
        }
        </style>
        
    </head>
    <body>
        <img class="picture" id="type1" src="blue_MarkerC.png">
        <img class="picture" id="type2" src="darkgreen_MarkerM.png">
        <img class="picture" id="type3" src="orange_MarkerR.png">
        <img class="picture" id="type4" src="purple_MarkerS.png">      


        <!-- Navigation bar-->
        <nav>
          <a href="#hScreen" id = "navOne">Home</a>
          <a href="#sScreen" id = "navTwo">Search</a>
          <a href="#rScreen" id = "navThree">Results</a>
        </nav>
        
        <!--Home screen-->        
        <div class = "screen" id = "hScreen">
            <h1>Welcome!</h1>
            <h3>Getting started by selecting a shool type that is right for you and your child.</h3>
            <button type="button" class="btn btn-primary centerMe" id = "start">Get Started</button>
        </div>
        
        <!--Search screen-->
        <div class = "row form-group form-inline screen" id = "sScreen">
                <h3>Please select the type of school you want for you and your children.</h3>
                <h5>Note: Hold down the Ctrl (windows) / Command (Mac) button to select multiple options.</h5>
                
                <!--Selected multiple-->
                <select id = "schoolType" class = "form-control" name = "School Type" multiple>
                  
                  <option value = "Career academy"> Career academy </option>
                  <option value = "Charter"> Charter </option>
                  <option value = "Citywide-Option"> Citywide-Option </option>
                  <option value = "Classical"> Classical </option>
                  <option value = "Contract"> Contract </option>
                  <option value = "Magnet"> Magnet </option>
                  <option value = "Military academy"> Military academy </option>
                  <option value = "Neighborhood"> Neighborhood </option>
                  <option value = "Regional gifted center"> Regional gifted center </option>
                  <option value = "Selective enrollment"> Selective enrollment </option>
                  <option value = "Small"> Small <br>
                  <option value = "Special Education"> Special Education </option>
                </select>
                <input id = "btnSearch" class = "btn btn-primary" type = "submit">
                <div id = "results"></div>
        </div>
        
        <!--<div class = "container" id = "results"></div> -->
        <div class = "screen" id = "rScreen">
            <h2>Map</h2>
            <div id="map"></div>
        </div>
        
        
        <!-- jQuery first, then Popper.js, then Bootstrap JS -->
        <script src="https://code.jquery.com/jquery-3.3.1.min.js"integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js" integrity="sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb" crossorigin="anonymous"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js" integrity="sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn" crossorigin="anonymous"></script>
        
        <!--Script for switching screens-->
        <script>
            // show the home screen
            $("#hScreen").show();
            
            // when a nav link is clicked, hide screens then show target
            $("nav a").on("click", function() {
            	$(".screen").hide();
                var targetSelector = $(this).attr("href");
                console.log(targetSelector);
                $(targetSelector).show();
            });
            
            var url = "https://data.cityofchicago.org/resource/76dk-7ieb.json?$where=school_type IN (<school type goes here>)";
            
            function initMap() {
                
                //when button is clicked
                $("#btnSearch").on("click", function() {
                    $.get(
                        //gets value entered in search box and adds it to var url
                        url.replace("<school type goes here>", $("#schoolType").val())
                    )
                    .done(function(response) {
                        
                        //centers map on chicago
                        var myLatLng = {lat: 41.8781, lng: -87.6298};
                        var map = new google.maps.Map(document.getElementById('map'), {
                            zoom: 10,
                            center: myLatLng,
                        });
                      
                        console.log(response);
                        $("#results").text("");
                    
                        
                        //loop begins
                        $.each(response, function(i,v) {
                            console.log(v);
                            
                            //appends results from database to div results
                            $("#results").append("<br>" + v.long_name + "<br>" + " Grades offered: " + v.grades_offered + "<br>" + v.school_type + "<br>");
                            
                            var contentString = '<div id="content" style="color:Black;">'+
                                                '<div id="siteNotice">'+
                                                '</div>'+
                                                '<h1 id="firstHeading" class="firstHeading">' +
                                                v.short_name + '</h1>' +
                                                '<div id="bodyContent">' +
                                                '<br>' + v.address + ", " + v.city + ", " + v.location_state + " " + v.location_zip + '<br>' +
                                                '<br>' + "Phone: " + v.phone + '<br>' +
                                                '<br>' + v.summary;
                                                '</div>';
                                                '</div>';
                            
                            //creates an info window
                            var infowindow = new google.maps.InfoWindow({
                                content: contentString
                            });
                            
                            //assigns different markers
                            if(v.school_type == "Career academy") {
                                 myColor = document.getElementById("type1").src;
                            }
                            if(v.school_type == "Military academy") {
                                 myColor = document.getElementById("type2").src;
                            }
                            if(v.school_type == "Regional gifted center") {
                                 myColor = document.getElementById("type3").src;
                            }
                            if(v.school_type == "Special Education") {
                                 myColor = document.getElementById("type4").src;
                            }
                            
                            //creates marker
                            var marker = new google.maps.Marker({
                                position: {lat:parseFloat( response[i].school_latitude), lng: parseFloat(response[i].school_longitude)},
                                map: map,
                                icon: myColor
                            });
                            
                            //opens info window on click
                            marker.addListener('click', function() {
                            infowindow.open(map, marker);
                            });
                        });
                    });
                });
            }
        </script>
        
        <!--google api-->
        <script async defer
            src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAx9rxfpIjJEQ75l2CeLbtWA68HNPSr8YY&callback=initMap">
        </script>
    </body>
</html>